# Coffee++ 开发文档

## 架构设计

### 词法分析器
处理源代码字符流，生成标记(token)序列。主要识别：
- 关键字(@import, printf, ret等)
- 标识符(变量名、函数名)
- 字面量(数字、字符串)
- 操作符(=>, ;, 等)

### 语法分析器
根据标记序列构建抽象语法树(AST)。处理：
- 语句结构
- 表达式优先级
- 作用域

### 虚拟机
执行AST，包含：
- 变量存储
- 函数调用栈
- 内置函数实现

## 扩展指南

### 添加新数据类型
1. 在common.h中添加枚举值
2. 扩展Variable联合体
3. 修改词法/语法分析器
4. 更新虚拟机处理逻辑

### 添加新语法
1. 添加新的token类型
2. 更新词法分析器识别规则
3. 添加AST节点类型
4. 实现虚拟机执行逻辑

## 性能优化
- 使用哈希表存储变量
- 实现字节码编译器
- 添加JIT编译支持